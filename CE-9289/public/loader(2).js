!function(){function a(){function a(a,b,c){function d(a){void 0!==c&&c(a)}function e(){void 0!==c&&c(null)}function f(){void 0!==c&&c(null)}var g=new XMLHttpRequest;g.open("GET",a),g.timeout=1e4,g.onload=d,g.onerror=e,g.ontimeout=f,g.setRequestHeader("Content-Type","application/json"),g.withCredentials=!1,g.send(b)}function b(){!0!==e&&(g=!0,k("","_s33 bfs_file_not_avl"),n("_s90 ERRORS/_s10 bfs_to",window.location.host),o())}var c,d=null,e=!1,g=!1;c=void 0!==F.env&&"dev"===F.env?void 0!==$&&""!==$?P+"mkt.forebase.ch/tagx/data/placements/bfs/"+$+".json":P+"localhost:3001/data/placements/settings/bfs/"+F.placementId+".json":P+"mkt.forebase.ch/tagx/data/placements/bfs/"+F.placementId+".json",!0===Z&&(c+="?cb="+Math.round(999999*Math.random())),window.setTimeout(b,12e3),d=+new Date,a(c,"",function(a){try{k("","_s32 bfs_file_avl");var b=JSON.parse(a.currentTarget.response)}catch(a){return k("","_s34 bfs_file_parse_err"),void n("_s90 ERRORS/_s11 bfs_parse",window.location.host)}e=!0,n("_s60 times/_s01 boot_file",m(+new Date-d)),!0===f(b,!0)?k("","_s36 bfs_file_data_ok"):k("","_s38 bfs_file_data_not_ok")})}function b(a){var b={ts:+new Date,text:a};L.push(b)}function c(a){function b(a){var b=1e6;if(a<1)return!0;var c=Math.round(Math.random()*b),d=Math.round(b/a),e=c+d;e>b&&(e=b,c=e-d);Math.random();Math.random(),Math.random(),Math.random();var f=Math.round((1-Math.random())*b);return f>=e||f<c}var c={gen:{reduc:z,skip:null},err:{reduc:A,skip:null},ldrOpDomain:"0"};return"unspecified"!==a.spred&&(c.gen.reduc=parseInt(a.spred)),"unspecified"!==a.opdomId&&(c.ldrOpDomain=a.opdomId),void 0!==a.env&&"dev"===a.env&&(c.gen.reduc=1,c.err.reduc=1,c.ldrOpDomain="0"),c.gen.skip=b(c.gen.reduc),c.err.skip=b(c.err.reduc),!0===a.firstTag?(E._anVar_skipGen=c.gen.skip,E._anVar_skipErr=c.err.skip):(c.gen.skip=E._anVar_skipGen,c.err.skip=E._anVar_skipErr),c}function d(){var a,b,c="_forebase_data_";return void 0===document[c]?(document[c]={},document[c].partitions=[],a=!0,b=0):(a=!1,b=document[c].partitions.length),{firstTag:a,tagIdx:b,fb_data_obj:document[c]}}function e(a,b){function c(a){function b(){for(var a=document.getElementsByClassName("_forebase_multitag"),b=0;b<a.length;b++){var c=a[b];if("fbmt_idle"===c.getAttribute("id"))return c}return null}function c(a,b,c){if(!0!==a.hasAttribute(b))return c;var d=a.getAttribute(b);return""===d?c:null===d?c:"undefined"===d?c:d}function d(a){function b(a){if(a.indexOf("${ringIdx}")<0)return null;for(var b=a.replace("${ringIdx}",""),d=document.getElementsByClassName("_forebase_multitag"),e=[],f=0;f<d.length;f++){var g=d[f],h=c(g,"data-partID","NA");"NA"!==h&&(h.indexOf(b)<0||e.push(g))}for(var i=0,f=0;f<e.length;f++){var g=e[f];"fbmt_idle"!==g.getAttribute("id")&&i++}return{ringIdx:i,prefix:b}}var d=b(a);return null===d?a:""+d.prefix+d.ringIdx}var e={status:"---",msg:"",loadUrl:"NA",ldrTagElm:null,placementId:"NA",plcmshft:!1,partId:"NA",exdata:"NA",swap:!1,fw_macro1:"NA",fw_macro2:"NA",fw_macro3:"NA",fw_macro4:"NA",opdomId:"NA",fbTagId:"NA",fxdVer:"NA",preview:!1};if(tagElm=b(),null===tagElm)return e.status="error",e.msg="no_idle_tag_found",e;e.ldrTagElm=tagElm,e.ldrTagID="fbmt_active_"+a;var f=c(tagElm,"data-flemID","NA");return"NA"!==f?(e.trgElmId=f,e.trgElmType="ifrm",e.cntElmId=c(tagElm,"data-pflemID","NA")):(e.trgElmId=e.ldrTagID,e.trgElmType="scrp"),e.multiTag=!0,e.placementId=tagElm.getAttribute("data-plcmID"),e.env=tagElm.getAttribute("data-env"),e.partId=c(tagElm,"data-partID","intrinsic"),e.partId=d(e.partId),e.exdata=c(tagElm,"data-exdata","NA"),e.swap="1"===c(tagElm,"data-swap","0"),e.opdomId=c(tagElm,"data-opdomID","unspecified"),e.fbTagId=c(tagElm,"data-tagID","NA"),e.fxdVer=c(tagElm,"data-fxdVer","NA"),e.preview="NA"!==e.fxdVer,e.fw_macro1=c(tagElm,"data-fw_macro1","NA"),e.fw_macro2=c(tagElm,"data-fw_macro2","NA"),e.fw_macro3=c(tagElm,"data-fw_macro3","NA"),e.fw_macro4=c(tagElm,"data-fw_macro4","NA"),e.spred=c(tagElm,"data-spred","unspecified"),e.loadUrl=tagElm.src,e.status="ok",e}function d(a){if(void 0===E)return null;if(void 0===E.partitions)return null;for(var b=E.partitions,c=0;c<b.length;c++){var d=b[c];if(d.partId===a)return d}return null}var e=c(b);if(e.firstTag=a,e.tagIdx=b,"ok"!==e.status)return e;if(!0===a?E._plcmID0=e.placementId:e.placementId!==E._plcmID0&&(e.placementId=E._plcmID0,e.plcmshft=!0),e.baseUrl="mkt.forebase.ch/plugin","dev"===e.env&&(e.baseUrl="localhost:3001"),null!==d(e.partId))return e.status="error",e.msg="duplicate_partition: "+e.partId,e;void 0===E&&(E={}),void 0===E.partitions&&(E.partitions=[]);var f={partId:e.partId,cntElmID:e.cntElmId,trgElmID:e.trgElmId,trgElmType:e.trgElmType,idx:b,exdata:decodeURIComponent(e.exdata),fw_macro1:e.fw_macro1,fw_macro2:e.fw_macro2,fw_macro3:e.fw_macro3,fw_macro4:e.fw_macro4,ts:+new Date};return E.partitions.push(f),null!==e.ldrTagID&&e.ldrTagElm.setAttribute("id",e.ldrTagID),e}function f(a,c){function d(a){var b,c,d;if(void 0!==a.status&&"ok"!==a.status)return n("_s90 ERRORS/_s20 bfs_stat",window.location.host),null;try{b=e(a.placement)}catch(a){return n("_s90 ERRORS/_s20 bfs_data",window.location.host+" | msg: "+a.msg),null}if(void 0!==a.broadcasts)try{c=JSON.parse(JSON.stringify(a.broadcasts))}catch(a){return n("_s90 ERRORS/_s30 parsing_broadcasts",window.location.host),null}if(void 0!==a.filedata)try{d=JSON.parse(JSON.stringify(a.filedata))}catch(a){return n("_s90 ERRORS/_s31 parsing_filedata",window.location.host),null}return{plcInfo:b,broadcasts:c,filedata:d}}function e(a){function b(a){return void 0!==a.totstop&&(!0===a.totstop||"true"===a.totstop)}function c(a){return void 0===a.bstfct?100:parseInt(a.bstfct)}function d(a,b){function c(a){try{if("string"!=typeof a)return null;var b=decodeURIComponent(a),c=JSON.parse(b);return"A"!==c.tcase&&"B"!==c.tcase?null:c.tcase}catch(a){}return null}var d=c(b);if(null!==d)return d;var e=50;switch(a){case"unspecified":break;case"A:00_B:100":e=0;break;case"A:01_B:99":e=1;break;case"A:10_B:90":e=10;break;case"A:30_B:70":e=30;break;case"A:50_B:50":e=50;break;case"A:70_B:30":e=70;break;case"A:90_B:10":e=90;break;case"A:99_B:01":e=99;break;case"A:100_B:00":case"A":e=100;break;case"B":e=0;break;case"random":e=50}return q(e)}function e(a,b){return"210"!==a.Version&&210!==a.Version?a.versionFolder:"B"===b&&a.versionFolderB.length>0?a.versionFolderB:a.versionFolderA}function f(a,b){b.ssaId="NA",b.ssaName="NA",b.ssaSctId="NA",b.ssaSctName="NA",b.virtual=!1,void 0!==a.ssaId&&(b.ssaId=a.ssaId),void 0!==a.ssaName&&(b.ssaName=a.ssaName),void 0!==a.ssaSctId&&(b.ssaSctId=a.ssaSctId),void 0!==a.ssaSctName&&(b.ssaSctName=a.ssaSctName),void 0!==a.virtual&&(b.virtual=a.virtual)}function g(){try{var a={testCase:""},b=window.localStorage.getItem("_fb_forced_vars"),c=JSON.parse(b);if(null!==c)for(var d in c)void 0!==a[d]&&(a[d]=c[d]);return a}catch(a){return null}}function h(a){function b(a){ba.indexOf("blob:http")>=0||window.localStorage.setItem(ba,JSON.stringify({version:a}))}var c=window.localStorage.getItem(ba);if(null===c)return b(a),"zero";try{return JSON.parse(c).version===a?"crsn":(b(a),"xver")}catch(a){}return b(a),"ntus"}var i={};i.baseUrl=F.baseUrl,i.placementId=F.placementId,i.partId=F.partId,i.exdata=F.exdata,i.swap=F.swap,i.opdomId=F.opdomId,i.fbTagId=F.fbTagId,i.env=F.env,i.spred=F.spred,i.fxdVer=F.fxdVer,i.preview=F.preview,i.totStop=b(a),i.bstfct=c(a),i.testCase=d(a.testCase,F.exdata),i.versionFolder=e(a,i.testCase),i.ldmd=h(i.versionFolder),i.publisher=a.publisher,i.versionBDM=a.versionBDM,i.versionVPM=a.versionVPM,f(a,i),i.stage=a.stage,i.localCache=a.localCache,!1===isNaN(parseInt(a.opdomain))&&(i.opdomId=a.opdomain),!0===isNaN(parseInt(i.opdomId))&&(i.opdomId="0"),i.startTime=C,i.loaderTag=y,i.secProt=O,i.cmp=parseInt(a.cmp);var j=g();return null!==j&&("A"!==j.testCase&&"B"!==j.testCase||(i.testCase=j.testCase)),i}function f(a){function b(a,b){var c=document.createElement("script");c.id=a,c.src=b,document.head.appendChild(c)}if("dev"===F.env)var c=P+F.baseUrl+"/versions/versionfolder/agent/agent_boot.js";else var c=P+F.baseUrl+"/versions/"+a+"/agent/fbagent.js";!0===Z&&(c+="?cb="+Math.round(999999*Math.random())),window.setTimeout(i,1e4),E.genCbk=j,I=+new Date,b("_fb_agtldr",c)}var h=!1,l=d(a);return null===l?h:(h=!0,!0===c&&g(a),!1!==H?h:(H=!0,b("boot ok"),k("","_s40 boot_ok"),!0===c?(b("bfs_data_from_file"),n("_s70 bfs_src","_s10 from file")):(b("bfs_data_from_mem"),n("_s70 bfs_src","_s20 from mem")),l.plcInfo.ldrLog=L,E.basic_settings=l.plcInfo,E.broadcasts={},void 0!==l.broadcasts&&(E.broadcasts=JSON.parse(JSON.stringify(l.broadcasts))),E.filedata={},void 0!==l.filedata&&(E.filedata=JSON.parse(JSON.stringify(l.filedata))),G=l.plcInfo.ldmd,w(F,l.plcInfo),!0!==l.plcInfo.totStop?(b("launching agent..."),k("","_s50 agent_reqd"),f(l.plcInfo.versionFolder),x("agln")):(b("TOTAL STOP ordered"),k("","_s51 TOTAL STOP")),o(),h))}function g(a){try{var b={ver:B,ts:(new Date).getTime(),data:a};window.localStorage.setItem(aa,JSON.stringify(b))}catch(a){}}function h(a,b){function c(a){return{status:"ok",msg:"",placement:{Version:"210",versionFolderA:a,versionFolderB:"",publisher:"",versionBDM:"",versionVPM:"",synchro:"0",localCache:!1,testCase:"A:50_B:50",opdomain:"0",cmp:"1",bstfct:"10000"}}}if(!0===a)return c(b);if(!0===Z)return null;try{var d=window.localStorage.getItem(aa);if(null===d)throw"no_prev_data";var e=JSON.parse(d);if(void 0!==e.ver&&e.ver!==B)throw"wrong_version";if((new Date).getTime()-e.ts>2592e5)throw"data_is_too_old";if(void 0===e.data)throw"data_not_found";return e.data}catch(a){return null}}function i(){!0!==J&&(K=!0,n("_s90 ERRORS/_s40 agent_to",window.location.host),k("","_s54 agent_to"))}function j(a,b){if(!0!==J){J=!0;n("_s60 times/_s02 agent",m(+new Date-I))}"dock_s"===a?(k("","_s52 agent_docked"),x("agdk")):l(""+a,""+b),o()}function k(a,b){l("/_s10 loader"+a,b)}function l(a,b){var c=""+a;c.length>0&&0!==c.indexOf("/")&&(c="/"+c),n("_s10 markers/"+F.placementId+"/*allDomains*"+c,b),n("_s10 markers/"+F.placementId+"/"+window.location.host+c,b)}function m(a){function b(a){var b=Math.round(a);return 0===b?"00":b<10?"0"+b:b}for(var c=[50,70,100,200,300,500,700,1e3,2e3,3e3,5e3,7e3,1e4,15e3,2e4],d="[",e=!1,f=-1,g=0;g<c.length;g++)if(a<c[g]){d+=0===g?"0-":c[g-1]+"-",d+=c[g],e=!0,f=g;break}!1===e&&(d+=c[c.length-1]+"plus"),d+="]";var h="_i";return(h+=-1===f?c.length:b(f))+" "+d}function n(a,b){function c(a,b){function c(a,b){function c(a){var b={changed:!1,pathStr:a.pathStr,dataStr:a.dataStr};if("/"!==b.dataStr.charAt(0))return b;var c=""+a.pathStr,d=""+a.dataStr;d=d.substring(1);var e=d.indexOf("/");return e<0?(b.changed=!1,b.pathStr=c,b.dataStr=d,b):(c+="/"+d.substring(0,e),d=d.substring(e),b.changed=!0,b.pathStr=c,b.dataStr=d,b)}for(var d={changed:!1,pathStr:a,dataStr:b},e=!1,f=50;f>0&&(f--,d=c(d),!0===d.changed);)e=!0;return{changed:e,newFldStr:d.pathStr,newDataStr:d.dataStr}}var d={},e=a,f=""+b;if(void 0!==b){var g=c(e,f);!0===g.changed&&(e=g.newFldStr,f=g.newDataStr)}var h=Q.gen.reduc,i=Q.gen.skip;return a.indexOf("ERROR")>=0&&(h=Q.err.reduc,i=Q.err.skip),"/"!==e.charAt(0)&&(e="/"+e),d.path=e,d.caption=f,d.cnt=h,d.effSkip=i,d}var d=c(a,b);if(!0!==d.effSkip){var e={group:"ev_cnt",event:"loader",ver:100,reduc:1,pidx:N,ts:(new Date).getTime()-C+N,data:{pat:"/_s10 sys/"+y+d.path,cap:d.caption,cnt:d.cnt}};M.push(JSON.parse(JSON.stringify(e))),N++,o()}}function o(){var a=!1;if(W>V&&(a=!0),M.length>=U?a=!0:Date.now()-R>T&&(a=!0),!0!==a)return setTimeout(p,S),void W++;p()}function p(){function a(a,b){function c(a){}function d(){}function e(){}var f=null;window.XMLHttpRequest?f=new XMLHttpRequest:window.ActiveXObject&&(f=new ActiveXObject("Microsoft.XMLHTTP")),null!==f&&(f.open("POST",a),f.timeout=1e4,f.onload=c,f.onerror=d,f.ontimeout=e,f.send(b))}if(0!==M.length){var b={ver:y,ldmd:G,fltr:"NA",tcase:D,plcmID:F.placementId,locus:F.placementId+"_[sys]",clntID:"NA",pageID:"NA",burst:M},c=encodeURIComponent(JSON.stringify(b)),d="http://";!0===O&&(d="https://");a(d+"accsrv.${number}.aws.forebase.com".replace("${number}",Q.ldrOpDomain)+"/receiver/postreportstr",c),M=[],W=0,R=Date.now()}}function q(a){var b=1e6;if(a<1)return"B";var c=Math.floor(Math.random()*b),d=Math.floor(b*a/100),e=c+d;e>b&&(e=c,c=e-d);Math.random();Math.random(),Math.random(),Math.random();var f=Math.floor((1-Math.random())*b);return f>=e?"B":f<c?"B":"A"}function r(a){return void 0!==a.disableLocCache&&a.disableLocCache}function s(a){return void 0===a.debugExtPlcm?"":a.debugExtPlcm}function t(){try{var a=window.localStorage.getItem("fb_debug_vars");if(null===a)throw{};return JSON.parse(a)}catch(a){}return{}}function u(){function a(){var a=!1;try{window.top===window.self&&(a=!0)}catch(a){}return a}var b=null,c="NA";b=a();try{c=location.href.split("/")[2],!0!==b&&(c=""!==document.referrer?document.referrer.split("/")[2]:"notavail")}catch(a){}return{topDoc:b,hostPageUrl:c}}function v(a,b){function c(c){function d(a){return""===a?"blank":a}n(c+"/_s10 top_or_frm",!0===a.topDoc?"_s10 top_wnd":"_s20 iframe"),n(c+"/_s12 plcm_shft",!0===b.plcmshft?"_s20 shifted":"_s10 native");var e=document.getElementById(b.trgElmId),f="NA",g="NA",h="NA",i="NA",j="NA",k="NA";if(null!==e){var l=e.parentNode;f=d(l.nodeName),g=d(l.id),h=d(l.className);var o=e.offsetParent;null!==o&&(i=d(o.nodeName),j=d(o.id),k=d(o.className))}var p="/_s30 position";if(n(c+p+"/_s10 trgElmId",b.trgElmId),p="/_s30 position/_s20 directPrnt",n(c+p+"/_s10 name",f),n(c+p+"/_s12 id",g),n(c+p+"/_s14 class",h),p="/_s30 position/_s30 offsetPrnt",n(c+p+"/_s10 name",i),n(c+p+"/_s12 id",j),n(c+p+"/_s14 class",k),performance){n(c+"/_s40 load_time",m(Date.now()-performance.timeOrigin))}}function d(){var c;c="/_s02 overview",n(c,b.placementId),c=c+"/"+b.placementId,n(c,a.hostPageUrl),c=c+"/"+a.hostPageUrl,n(c,b.partId),c=c+"/"+b.partId,n(c,"tag_type: "+b.fbTagId)}d(),c("_s04 run_info/"+b.placementId+"/*allDomains*/"+b.partId),c("_s04 run_info/"+b.placementId+"/"+a.hostPageUrl+"/"+b.partId)}function w(a,b){var c="_s20 gen_vars";n(c+"/_s10 test_case",b.testCase),n(c+"/_s12 bst_fac",b.bstfct),n(c+"/_s14 cmp",b.cmp),n(c+"/_s16 fb_tag_id",b.fbTagId),n(c+"/_s18 local_cache",b.localCache),n(c+"/_s20 opdom_id",b.opdomId),n(c+"/_s22 part_id",b.partId),n(c+"/_s24 base_url",b.baseUrl),n(c+"/_s26 loader_tag",y),n(c+"/_s28 vers_fldr",b.versionFolder),n(c+"/_s30 load_mode",b.ldmd),n(c+"/_s32 spec_red",b.spred),n(c+"/_s34 ldrx_url",a.loadUrl.replace(/\//g,"|"))}function x(a){var b=document;try{var b=top.document}catch(a){}try{b._fb_debg_f(a)}catch(a){}}var y="_lv100",z=200,A=10,B=130,C=+new Date,D=(Math.round(999999*Math.random()),q(50)),E=null,F=null,G="",H=!1,I=null,J=!1,K=!1,L=[],M=[],N=0,O=!1,P="http://",Q={},R=0,S=3e3,T=2e3,U=10,V=10,W=0,X=u();x("ldin");var Y=t(),Z=r(Y),$=s(Y);try{var _=d();E=_.fb_data_obj,F=e(_.firstTag,_.tagIdx),Q=c(F),window.location.protocol.indexOf("https")>=0&&(O=!0,P="https://"),"ok"===F.status&&F.loadUrl.toLowerCase().indexOf("https")>=0&&(O=!0,P="https://")}catch(a){return void x("excp")}if(b("loader booting... ldrTg:"+y),b("new instance - plcm:"+F.placementId+", part:"+F.partId),b("_secProt:"+O),k("","_s00 inst"),v(X,F),o(),"ok"!==F.status)return n("_s90 ERRORS/_s00 load_tag_error",F.msg),n("_s90 ERRORS/_s00 load_tag_error","/"+window.location.host+"/"+F.placementId+"/"+F.msg),null!==F.ldrTagID&&null!==F.ldrTagElm&&F.ldrTagElm.setAttribute("id","fbmt_error"),void o();if(o(),!0===F.firstTag){k("","_s10 loading"),x("rung");var aa="_fb_bfs_"+F.placementId,ba="_fb_ldm_"+F.placementId;k("","_s20 bfs_mem_rqd");var ca=h(F.preview,F.fxdVer);null!==ca?(k("","_s22 bfs_mem_avl"),!0===f(ca,!1)?k("","_s26 bfs_mem_data_ok"):k("","_s28 bfs_mem_data_not_ok")):k("","_s24 bfs_mem_not_avl"),!0!==F.preview&&a(),b("boot file rqd"),k("","_s30 bfs_file_rqd"),o()}}();